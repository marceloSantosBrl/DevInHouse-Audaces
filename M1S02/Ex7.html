<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<script>

  const findPrimes = n => {
    let arr = Array(n + 1).fill(true);
    for (let i = 2; i <= Math.sqrt(n); ++i) {
      if(arr[i] === true) {
        let j = i * i;
        while (j <= n) {
          arr[j] = false;
          j = j + i;
        }
      }
    }
    return arr;
  }

  const countPrimes = arr => {
    let numberOfPrimes = 0;
    for (let i = 2; i < arr.length; ++i) {
      if(arr[i]) ++numberOfPrimes;
    }
    return numberOfPrimes;
  }
  
  const makeStringPrimes = (arr) => {
    let primeString = "";
    for (let i = 2; i < arr.length; ++i){
      if (arr[i]) {
        primeString += i + "\n";
      }
    }
    return primeString;
  }

  const validatePrimes = function (message) {
    while (true) {
      let inputString = window.prompt(message);
      if (inputString === "s") return "s";
      let number = parseInt(inputString);
      if (!isNaN(number) && isFinite(inputString)) {
        return number;
      } else {
        alert("Digite um número válido");
      }
    }
  }

  while (true) {

    let number = validatePrimes("Digite um número ou s para sair");
    if (number === "s") break;
    let arrPrimes = findPrimes(number);
    let primeCount = countPrimes(arrPrimes);
    let primeString = makeStringPrimes(arrPrimes);
    alert(
            `Temos ${primeCount} entre 1 e ${number} sendo eles:\n` + primeString
    )
  }

</script>
</body>
</html>