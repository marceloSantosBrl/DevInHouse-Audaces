<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<script>

  const findPrimes = (n) => {
    const arr = Array(n + 1).fill(true);
    for (let i = 2; i <= Math.sqrt(n); i += 1) {
      if (arr[i] === true) {
        let j = i * i;
        while (j <= n) {
          arr[j] = false;
          j += i;
        }
      }
    }
    return arr;
  };

  const countPrimes = (arr) => {
    let numberOfPrimes = 0;
    for (let i = 2; i < arr.length; i += 1) {
      if (arr[i]) numberOfPrimes += 1;
    }
    return numberOfPrimes;
  };

  const makeStringPrimes = (arr) => {
    let primeString = '';
    for (let i = 2; i < arr.length; i += 1) {
      if (arr[i]) {
        primeString += `${i}\n`;
      }
    }
    return primeString;
  };

  const validateNumber = function (message) {
    while (true) {
      const inputString = window.prompt(message);
      if (inputString === 's') return 's';
      const number = parseInt(inputString, 10);
      if (!Number.isNaN(number) && Number.isFinite(inputString)) {
        return number;
      }
      alert('Digite um número válido');
    }
  };

  while (true) {
    const number = validateNumber('Digite um número ou s para sair');
    if (number === 's') break;
    const arrPrimes = findPrimes(number);
    const primeCount = countPrimes(arrPrimes);
    const primeString = makeStringPrimes(arrPrimes);
    alert(
      `Temos ${primeCount} entre 1 e ${number} sendo eles:\n${primeString}`,
    );
  }

</script>
</body>
</html>